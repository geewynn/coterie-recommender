name: preprocess
description: Performs the IOB preprocessing.
inputs:
- {name: input_data_path, type: {GcsPath: {data_type: CSV}}}
- {name: transform_path_uri, type: GCSPath}
- {name: user_tftransform_path_uri, type: GCSPath}
- {name: item_tftransform_path_uri, type: GCSPath}
- {name: nitems_path_uri, type: GCSPath}
- {name: nusers_path_uri, type: GCSPath}
outputs:
- {name: transform_path_uri, type: GCSPath}
- {name: user_tftransform_path_uri, type: GCSPath}
- {name: item_tftransform_path_uri, type: GCSPath}
- {name: nitems_path_uri, type: GCSPath}
- {name: nusers_path_uri, type: GCSPath}
implementation:
  container:
    image: gcr.io/kubeflor/kubeflow/rec/preprocess:latest
    command: [
      python3, /pipelines/component/src/processing.py,
      --input,                 {inputValue: input_data_path},
      --transform,             {inputValue: transform_path_uri},
      --user-tftransform,      {inputValue: user_tftransform_path_uri },
      --item-tftransform,      {inputValue: item_tftransform_path_uri},
      --nitems,                {inputValue: nitems_path_uri},
      --nusers,                {inputValue: nusers_path_uri},
      
      --transform-path-file,             {outputPath: transform_path_uri},
      --user-tftransform-path-file,      {outputPath: user_tftransform_path_uri },
      --item-tftransform-path-file,      {outputPath: item_tftransform_path_uri},
      --nitems-path-file,                {outputPath: nitems_path_uri},
      --nusers-path-file,                {outputPath: nusers_path_uri},
    ]
